/*!
 * Guts
 * (c) 2018 Jhonnatan Gonzalez <jhonnatanhxc@gmail.com>
 * https://github.com/xtatanx/guts
 *
 * Licensed under the MIT license.
 */
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("core-js/modules/es6.typed.array-buffer"),require("core-js/modules/es6.typed.int8-array"),require("core-js/modules/es6.typed.uint8-array"),require("core-js/modules/es6.typed.uint8-clamped-array"),require("core-js/modules/es6.typed.int16-array"),require("core-js/modules/es6.typed.uint16-array"),require("core-js/modules/es6.typed.int32-array"),require("core-js/modules/es6.typed.uint32-array"),require("core-js/modules/es6.typed.float32-array"),require("core-js/modules/es6.typed.float64-array"),require("core-js/modules/es6.map"),require("core-js/modules/es6.set"),require("core-js/modules/es6.weak-map"),require("core-js/modules/es6.weak-set"),require("core-js/modules/es6.reflect.apply"),require("core-js/modules/es6.reflect.construct"),require("core-js/modules/es6.reflect.define-property"),require("core-js/modules/es6.reflect.delete-property"),require("core-js/modules/es6.reflect.get"),require("core-js/modules/es6.reflect.get-own-property-descriptor"),require("core-js/modules/es6.reflect.get-prototype-of"),require("core-js/modules/es6.reflect.has"),require("core-js/modules/es6.reflect.is-extensible"),require("core-js/modules/es6.reflect.own-keys"),require("core-js/modules/es6.reflect.prevent-extensions"),require("core-js/modules/es6.reflect.set"),require("core-js/modules/es6.reflect.set-prototype-of"),require("core-js/modules/es6.promise"),require("core-js/modules/es6.symbol"),require("core-js/modules/es6.object.freeze"),require("core-js/modules/es6.object.seal"),require("core-js/modules/es6.object.prevent-extensions"),require("core-js/modules/es6.object.is-frozen"),require("core-js/modules/es6.object.is-sealed"),require("core-js/modules/es6.object.is-extensible"),require("core-js/modules/es6.object.get-own-property-descriptor"),require("core-js/modules/es6.object.get-prototype-of"),require("core-js/modules/es6.object.keys"),require("core-js/modules/es6.object.get-own-property-names"),require("core-js/modules/es6.object.assign"),require("core-js/modules/es6.object.is"),require("core-js/modules/es6.object.set-prototype-of"),require("core-js/modules/es6.function.name"),require("core-js/modules/es6.string.raw"),require("core-js/modules/es6.string.from-code-point"),require("core-js/modules/es6.string.code-point-at"),require("core-js/modules/es6.string.repeat"),require("core-js/modules/es6.string.starts-with"),require("core-js/modules/es6.string.ends-with"),require("core-js/modules/es6.string.includes"),require("core-js/modules/es6.regexp.flags"),require("core-js/modules/es6.regexp.match"),require("core-js/modules/es6.regexp.replace"),require("core-js/modules/es6.regexp.split"),require("core-js/modules/es6.regexp.search"),require("core-js/modules/es6.array.from"),require("core-js/modules/es6.array.of"),require("core-js/modules/es6.array.copy-within"),require("core-js/modules/es6.array.find"),require("core-js/modules/es6.array.find-index"),require("core-js/modules/es6.array.fill"),require("core-js/modules/es6.array.iterator"),require("core-js/modules/es6.number.is-finite"),require("core-js/modules/es6.number.is-integer"),require("core-js/modules/es6.number.is-safe-integer"),require("core-js/modules/es6.number.is-nan"),require("core-js/modules/es6.number.epsilon"),require("core-js/modules/es6.number.min-safe-integer"),require("core-js/modules/es6.number.max-safe-integer"),require("core-js/modules/es6.math.acosh"),require("core-js/modules/es6.math.asinh"),require("core-js/modules/es6.math.atanh"),require("core-js/modules/es6.math.cbrt"),require("core-js/modules/es6.math.clz32"),require("core-js/modules/es6.math.cosh"),require("core-js/modules/es6.math.expm1"),require("core-js/modules/es6.math.fround"),require("core-js/modules/es6.math.hypot"),require("core-js/modules/es6.math.imul"),require("core-js/modules/es6.math.log1p"),require("core-js/modules/es6.math.log10"),require("core-js/modules/es6.math.log2"),require("core-js/modules/es6.math.sign"),require("core-js/modules/es6.math.sinh"),require("core-js/modules/es6.math.tanh"),require("core-js/modules/es6.math.trunc"),require("core-js/modules/es7.array.includes"),require("core-js/modules/es7.object.values"),require("core-js/modules/es7.object.entries"),require("core-js/modules/es7.object.get-own-property-descriptors"),require("core-js/modules/es7.string.pad-start"),require("core-js/modules/es7.string.pad-end"),require("core-js/modules/web.timers"),require("core-js/modules/web.immediate"),require("core-js/modules/web.dom.iterable"),require("regenerator-runtime/runtime")):"function"==typeof define&&define.amd?define(["core-js/modules/es6.typed.array-buffer","core-js/modules/es6.typed.int8-array","core-js/modules/es6.typed.uint8-array","core-js/modules/es6.typed.uint8-clamped-array","core-js/modules/es6.typed.int16-array","core-js/modules/es6.typed.uint16-array","core-js/modules/es6.typed.int32-array","core-js/modules/es6.typed.uint32-array","core-js/modules/es6.typed.float32-array","core-js/modules/es6.typed.float64-array","core-js/modules/es6.map","core-js/modules/es6.set","core-js/modules/es6.weak-map","core-js/modules/es6.weak-set","core-js/modules/es6.reflect.apply","core-js/modules/es6.reflect.construct","core-js/modules/es6.reflect.define-property","core-js/modules/es6.reflect.delete-property","core-js/modules/es6.reflect.get","core-js/modules/es6.reflect.get-own-property-descriptor","core-js/modules/es6.reflect.get-prototype-of","core-js/modules/es6.reflect.has","core-js/modules/es6.reflect.is-extensible","core-js/modules/es6.reflect.own-keys","core-js/modules/es6.reflect.prevent-extensions","core-js/modules/es6.reflect.set","core-js/modules/es6.reflect.set-prototype-of","core-js/modules/es6.promise","core-js/modules/es6.symbol","core-js/modules/es6.object.freeze","core-js/modules/es6.object.seal","core-js/modules/es6.object.prevent-extensions","core-js/modules/es6.object.is-frozen","core-js/modules/es6.object.is-sealed","core-js/modules/es6.object.is-extensible","core-js/modules/es6.object.get-own-property-descriptor","core-js/modules/es6.object.get-prototype-of","core-js/modules/es6.object.keys","core-js/modules/es6.object.get-own-property-names","core-js/modules/es6.object.assign","core-js/modules/es6.object.is","core-js/modules/es6.object.set-prototype-of","core-js/modules/es6.function.name","core-js/modules/es6.string.raw","core-js/modules/es6.string.from-code-point","core-js/modules/es6.string.code-point-at","core-js/modules/es6.string.repeat","core-js/modules/es6.string.starts-with","core-js/modules/es6.string.ends-with","core-js/modules/es6.string.includes","core-js/modules/es6.regexp.flags","core-js/modules/es6.regexp.match","core-js/modules/es6.regexp.replace","core-js/modules/es6.regexp.split","core-js/modules/es6.regexp.search","core-js/modules/es6.array.from","core-js/modules/es6.array.of","core-js/modules/es6.array.copy-within","core-js/modules/es6.array.find","core-js/modules/es6.array.find-index","core-js/modules/es6.array.fill","core-js/modules/es6.array.iterator","core-js/modules/es6.number.is-finite","core-js/modules/es6.number.is-integer","core-js/modules/es6.number.is-safe-integer","core-js/modules/es6.number.is-nan","core-js/modules/es6.number.epsilon","core-js/modules/es6.number.min-safe-integer","core-js/modules/es6.number.max-safe-integer","core-js/modules/es6.math.acosh","core-js/modules/es6.math.asinh","core-js/modules/es6.math.atanh","core-js/modules/es6.math.cbrt","core-js/modules/es6.math.clz32","core-js/modules/es6.math.cosh","core-js/modules/es6.math.expm1","core-js/modules/es6.math.fround","core-js/modules/es6.math.hypot","core-js/modules/es6.math.imul","core-js/modules/es6.math.log1p","core-js/modules/es6.math.log10","core-js/modules/es6.math.log2","core-js/modules/es6.math.sign","core-js/modules/es6.math.sinh","core-js/modules/es6.math.tanh","core-js/modules/es6.math.trunc","core-js/modules/es7.array.includes","core-js/modules/es7.object.values","core-js/modules/es7.object.entries","core-js/modules/es7.object.get-own-property-descriptors","core-js/modules/es7.string.pad-start","core-js/modules/es7.string.pad-end","core-js/modules/web.timers","core-js/modules/web.immediate","core-js/modules/web.dom.iterable","regenerator-runtime/runtime"],r):e.Guts=r()}(this,function(){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},e=function(){function o(e,r){for(var s=0;s<r.length;s++){var o=r[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,s){return r&&o(e.prototype,r),s&&o(e,s),e}}(),u=function(e){if(Array.isArray(e)){for(var r=0,s=Array(e.length);r<e.length;r++)s[r]=e[r];return s}return Array.from(e)};function r(e){e.prototype.initComponents=function(){var t=this,n=function(e){e.forEach(function(e){!function(e){if(!e.dataset.component)return n([].concat(u(e.children)));var r=e.dataset.component,s=t.components[r];if(!s)throw new Error("Component "+r+" is not registered");s.prototype.components=t.components;var o=new s(e,t);o.initialize(),o.initComponents(),o.bindEvents(),t.children.push(o)}(e)})},e=[].concat(u(this.element.children));n(e)}}function s(e){e.prototype.on=function(e,r){this.events[e]||(this.events[e]=[]),this.events[e].push(r)},e.prototype.once=function(t,n){var u=this;this.on(t,function e(){for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];u.off(t,e),n.apply(null,s)})},e.prototype.emit=function(e){for(var r=this,s=arguments.length,o=Array(1<s?s-1:0),t=1;t<s;t++)o[t-1]=arguments[t];do{if(r.events[e])for(var n=r.events[e],u=0;u<n.length;u++)n[u].apply(null,o);r=r.parent}while(r)},e.prototype.off=function(e,r){var s=this.events[e];if(s){var o=s.indexOf(r);-1!==o&&s.splice(o,1)}},e.prototype.broadcast=function(o){for(var e=arguments.length,t=Array(1<e?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var s=this.children;if(0!==s.length){var n=[].concat(Array.prototype.slice.call(arguments));s.forEach(function(e){if(e.events[o])for(var r=e.events[o],s=0;s<r.length;s++)r[s].apply(null,t);e.broadcast.apply(e,n)})}}}var o=function(){function o(e){var r=this,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;n(this,o),this.element=this.ensureElement_(e),this.options=this.collectOptions_(),this.events={},this.children=[],this.parent=s,this.on("hook:initialized",function(){r.initialized()})}return e(o,[{key:"bindEvents",value:function(){var e=this.events;if(e){for(var r in e)if(e.hasOwnProperty(r)){var s=e[r];if("function"===!(void 0===s||t(s))&&(s=this[s]),!s)continue;var o=r.match(l.EVENT_SPLITTER);this.bindEvent(o[1],o[2],s)}return this}}},{key:"bindEvent",value:function(r,e,s){return e&&e.length?[].concat(u(this.element.querySelectorAll(e))).map(function(e){e.addEventListener(r,s,!1)}):this.element.addEventListener(r,s,!1),this}},{key:"unbindEvents",value:function(){var e=this.events;if(e){for(var r in e)if(e.hasOwnProperty(r)){var s=e[r];if("function"===!(void 0===s||t(s))&&(s=this[s]),!s)continue;var o=r.match(l.EVENT_SPLITTER);this.unbindEvent(o[1],o[2],s)}return this}}},{key:"unbindEvent",value:function(r,e,s){return e&&e.length?[].concat(u(this.element.querySelectorAll(e))).map(function(e){e.removeEventListener(r,s,!1)}):this.element.removeEventListener(r,s,!1),this}},{key:"ensureElement_",value:function(e){if(!(e&&e instanceof Element))throw new Error("Component should be initialized on an element");return e}},{key:"collectOptions_",value:function(){var r=this,s={};[].concat(u(this.element.attributes)).filter(function(e){return l.DATA_ATTR_NAME.test(e.name)&&"data-component"!==e.name}).forEach(function(e){s[l.DATA_ATTR_NAME.exec(e.name)[1]]=r.parseOptions_(e.value)});return s}},{key:"parseOptions_",value:function(e){var r=void 0;try{if(r=JSON.parse(e),"[object Object]"===Object.prototype.toString.call(r))return r}catch(e){}return"[object String]"===Object.prototype.toString.call(e)&&0===e.length?""===e:isNaN(e)?e:parseInt(e)}},{key:"initialize",value:function(){}},{key:"initialized",value:function(){}}]),o}();r(o),s(o);var i,c,l={EVENT_SPLITTER:/^(\S+)\s*(.*)$/,DATA_ATTR_NAME:/^data\-([a-z\d\-]+)$/},m=function(){function o(e){var r=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).events,s=void 0===r?{}:r;n(this,o),this.element=this.ensureElement_(e),this.components=o.components,this.events=s,this.children=[],this.initComponents(),this.broadcast("hook:initialized")}return e(o,[{key:"ensureElement_",value:function(e){if(!e)throw new Error("You need DOM element to initialize");var r=document.querySelector(e);if(!r)throw new Error("Element not found in document");return r}}]),o}();return r(m),s(m),c=(i=m).components,i.prototype.components=c,m.Component=o,m.components=Object.create(null),m.component=function(e,r){r&&(this.components[e]=r)},m});
